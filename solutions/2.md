# Even Fibonacci numbers

Each new term in the Fibonacci sequence is generated by adding the previous two terms. By starting with $$1$$ and $$2$$, the first $$10$$ terms will be:

$$1, 2, 3, 5, 8, 13, 21, 34, 55, 89, \dots$$

By considering the terms in the Fibonacci sequence whose values do not exceed four million, find the sum of the even-valued terms.

# 翻译

斐波那契数列中的每一项都是前两项的和。由$$1$$和$$2$$开始生成的斐波那契数列的前项为：

$$1, 2, 3, 5, 8, 13, 21, 34, 55, 89, \dots$$

考虑该斐波那契数列中不超过四百万的项，求其中为偶数的项之和。

# 题解

## 我的解法

数据量很小，可以直接暴力算fibonacci数列，然后统计偶数项即可

## code

### cpp

```cpp
#include <bits/stdc++.h>
using namespace std;
int main() {
    int a = 1, b = 2;
    int sum = 0;
    while (b < 4 * 1000 * 1000) {
        if (b % 2 == 0)
            sum += b;
        swap(a, b);
        b += a;
    }
    cout << sum << endl;
    return 0;
}
```

### python

```py
sum_of_even = 0
a, b = 1, 2
while b < 4 * 1000 * 1000:
    if b % 2 == 0:
        sum_of_even += b
    a, b = b, a + b
print(sum_of_even)
```

### go

```go 
package main

import "fmt"

func main() {
	sumOfEven := 0
	a, b := 1, 2
	for b < 4*1000*1000 {
		if b%2 == 0 {
			sumOfEven += b
		}
		a, b = b, a+b
	}
	fmt.Printf("%d\n", sumOfEven)
}
```

# 扩展

## 扩展1

[hankerrand](https://www.hackerrank.com/contests/projecteuler/challenges/euler002/problem?isFullScreen=true) 上有个扩展，不超过 $$10^5$$ 组样例，每组给你一个数字 $$n$$, 让你求不超过 $$n$$ 的值为偶数的fibonacci项的和。

这道题只是数据上加强了，一样可以用暴力的做法A掉。 下面给出AC的cpp代码。

### code

```cpp
#include <iostream>

using namespace std;

long long cal(long long n) {
    long long a = 1, b = 2;
    long long sum = 0;
    while (b < n) {
        if (b % 2 == 0)
            sum += b;
        swap(a, b);
        b += a;
    }
    return sum;
}


int main(){
    int t;
    cin >> t;
    for(int a0 = 0; a0 < t; a0++){
        long long n;
        cin >> n;
        cout << cal(n) << endl;
    }
    return 0;
}
```

## 扩展2

一个也蛮有意思的扩展是，记 $$f(n)$$ 求 fibonacci 前 $$n$$ 项中，值为偶数的项的和。答案对 $$1\ 000\ 000\ 007$$ 取模。

例如，当 $$n = 10$$ 时，fibonacci 前 $$10$$ 项为：

$$1, 2, 3, 5, 8, 13, 21, 34, 55, 89$$

其中值为偶数的项是: $$2, 8, 34$$，那么 $$f(10) = 2+8+34 = 44$$ 。

### 解法

首先不难观察到 fibonacci 的第 $$2, 5, 8, \dots 3n+2$$ 项才会是偶数。证明也很简单，可以用数学归纳法快速证明，这里略去证明过程。

根据这一点，原问题就转换成求一个新数列的第 $$n$$ 项，这里我们定义这个数列为 $$a$$，那么 $$a_n = \sum_{i=0}^n f(3n+2)$$。现在问题就是怎么快速计算 $$a_n$$

这里，神奇的OEIS告诉了我们答案：[A099919](https://oeis.org/A099919)，我们有 $$a(n) = 4*a(n - 1) + a(n - 2) + 2, n\gt 1$$，证明过程也简单，可以用数学归纳法证明，过程略。

有了递推公式，求第 $$n$$ 项就很简单了，就是一个简单的矩阵快速幂，这里不额外展开。
